# Polymorphic Edge Table Example
# This schema demonstrates a single table containing multiple edge types

name: social_polymorphic
version: "1.0"

graph_schema:
  nodes:
    - label: User
      database: brahmand
      table: users_bench  # Using benchmark table
      node_id: user_id
      property_mappings:
        user_id: user_id
        name: full_name   # Map to actual column
        email: email_address  # Map to actual column

    - label: Post
      database: brahmand
      table: posts_bench  # Using benchmark table
      node_id: post_id
      property_mappings:
        post_id: post_id
        title: content  # Map content as title
        content: content  # Map to actual column
        created: created_at  # Map to actual column

  edges:
    # Polymorphic edge - generates one EdgeSchema per type_value
    - polymorphic: true
      database: brahmand
      table: interactions
      from_id: from_id
      to_id: to_id
      
      # Discovery columns (matched at query time)
      type_column: interaction_type
      from_label_column: from_type
      to_label_column: to_type
      
      # Explicit list of edge types (REQUIRED - no DB scan!)
      # One EdgeSchema generated per type
      # Node types matched at query time via from_type/to_type columns
      type_values:
        - FOLLOWS
        - LIKES
        - AUTHORED
        - COMMENTED
        - SHARED
      
      # Composite edge ID (allow multiple interactions of same type)
      edge_id: [from_id, to_id, interaction_type, timestamp]
      
      # Shared properties across all edge types
      property_mappings:
        created_at: timestamp
        weight: interaction_weight
