-- ClickGraph Demo Data Initialization
-- Creates and populates demo tables for social network graph
-- Note: MergeTree persists data across container restarts.
-- This file runs automatically via docker-entrypoint-initdb.d on first container start.

-- Users table
CREATE TABLE IF NOT EXISTS social.users (
  user_id UInt32,
  name String,
  email String,
  created_at DateTime DEFAULT now()
) ENGINE = MergeTree() ORDER BY user_id;

-- Posts table
CREATE TABLE IF NOT EXISTS social.posts (
  post_id UInt32,
  content String,
  created_at DateTime DEFAULT now()
) ENGINE = MergeTree() ORDER BY post_id;

-- AUTHORED relationship (User -> Post)
CREATE TABLE IF NOT EXISTS social.post_authored (
  user_id UInt32,
  post_id UInt32,
  created_at DateTime DEFAULT now()
) ENGINE = MergeTree() ORDER BY (user_id, post_id);

-- LIKED relationship (User -> Post)
CREATE TABLE IF NOT EXISTS social.post_likes (
  user_id UInt32,
  post_id UInt32,
  created_at DateTime DEFAULT now()
) ENGINE = MergeTree() ORDER BY (user_id, post_id);

-- User follows User relationship
CREATE TABLE IF NOT EXISTS social.user_follows (
  follower_id UInt32,
  followed_id UInt32,
  created_at DateTime DEFAULT now()
) ENGINE = MergeTree() ORDER BY (follower_id, followed_id);
-- Insert sample users (30 users)
INSERT INTO social.users VALUES
  (1, 'Alice', 'alice@example.com', '2026-01-01 11:00:00'),
  (2, 'Bob', 'bob@example.com', '2026-01-02 12:00:00'),
  (3, 'Carol', 'carol@example.com', '2026-01-03 13:00:00'),
  (4, 'David', 'david@example.com', '2026-01-04 14:00:00'),
  (5, 'Eve', 'eve@example.com', '2026-01-05 10:00:00'),
  (6, 'Frank', 'frank@example.com', '2026-01-06 11:00:00'),
  (7, 'Grace', 'grace@example.com', '2026-01-07 12:00:00'),
  (8, 'Henry', 'henry@example.com', '2026-01-08 13:00:00'),
  (9, 'Iris', 'iris@example.com', '2026-01-09 14:00:00'),
  (10, 'Jack', 'jack@example.com', '2026-01-10 10:00:00'),
  (11, 'Kate', 'kate@example.com', '2026-01-11 11:00:00'),
  (12, 'Leo', 'leo@example.com', '2026-01-12 12:00:00'),
  (13, 'Mia', 'mia@example.com', '2026-01-13 13:00:00'),
  (14, 'Noah', 'noah@example.com', '2026-01-14 14:00:00'),
  (15, 'Olivia', 'olivia@example.com', '2026-01-15 10:00:00'),
  (16, 'Paul', 'paul@example.com', '2026-01-16 11:00:00'),
  (17, 'Quinn', 'quinn@example.com', '2026-01-17 12:00:00'),
  (18, 'Rachel', 'rachel@example.com', '2026-01-18 13:00:00'),
  (19, 'Sam', 'sam@example.com', '2026-01-19 14:00:00'),
  (20, 'Tina', 'tina@example.com', '2026-01-20 10:00:00'),
  (21, 'Uma', 'uma@example.com', '2026-01-21 11:00:00'),
  (22, 'Victor', 'victor@example.com', '2026-01-22 12:00:00'),
  (23, 'Wendy', 'wendy@example.com', '2026-01-23 13:00:00'),
  (24, 'Xander', 'xander@example.com', '2026-01-24 14:00:00'),
  (25, 'Yara', 'yara@example.com', '2026-01-25 10:00:00'),
  (26, 'Zack', 'zack@example.com', '2026-01-26 11:00:00'),
  (27, 'Amy', 'amy@example.com', '2026-01-27 12:00:00'),
  (28, 'Ben', 'ben@example.com', '2026-01-28 13:00:00'),
  (29, 'Chloe', 'chloe@example.com', '2026-01-29 14:00:00'),
  (30, 'Dan', 'dan@example.com', '2026-01-30 10:00:00');

-- Insert sample posts (50 posts)
INSERT INTO social.posts VALUES
  (1, 'Getting started with graph databases', '2026-01-10 10:00:00'),
  (2, 'Neo4j browser tips and tricks', '2026-01-10 11:00:00'),
  (3, 'Hello World from ClickGraph', '2026-01-10 12:00:00'),
  (4, 'ClickGraph performance optimization', '2026-01-10 13:00:00'),
  (5, 'Graph databases vs relational databases', '2026-01-10 14:00:00'),
  (6, 'Cypher query optimization', '2026-01-11 10:00:00'),
  (7, 'Building social networks with graphs', '2026-01-11 11:00:00'),
  (8, 'ClickHouse integration patterns', '2026-01-11 12:00:00'),
  (9, 'Variable length path queries', '2026-01-11 13:00:00'),
  (10, 'Understanding graph traversals', '2026-01-11 14:00:00'),
  (11, 'Best practices for graph modeling', '2026-01-12 10:00:00'),
  (12, 'MATCH clause deep dive', '2026-01-12 11:00:00'),
  (13, 'OPTIONAL MATCH use cases', '2026-01-12 12:00:00'),
  (14, 'Graph algorithms overview', '2026-01-12 13:00:00'),
  (15, 'Shortest path finding', '2026-01-12 14:00:00'),
  (16, 'PageRank implementation', '2026-01-13 10:00:00'),
  (17, 'Community detection techniques', '2026-01-13 11:00:00'),
  (18, 'Real-time graph analytics', '2026-01-13 12:00:00'),
  (19, 'Distributed graph processing', '2026-01-13 13:00:00'),
  (20, 'Graph visualization tools', '2026-01-13 14:00:00'),
  (21, 'Data modeling for social graphs', '2026-01-14 10:00:00'),
  (22, 'Schema design principles', '2026-01-14 11:00:00'),
  (23, 'Property graph model explained', '2026-01-14 12:00:00'),
  (24, 'Indexing strategies for graphs', '2026-01-14 13:00:00'),
  (25, 'Query performance tuning', '2026-01-14 14:00:00'),
  (26, 'Graph database scaling', '2026-01-15 10:00:00'),
  (27, 'Bolt protocol internals', '2026-01-15 11:00:00'),
  (28, 'HTTP API vs Bolt', '2026-01-15 12:00:00'),
  (29, 'Authentication and security', '2026-01-15 13:00:00'),
  (30, 'Multi-tenancy in graph databases', '2026-01-15 14:00:00'),
  (31, 'Graph ETL pipelines', '2026-01-16 10:00:00'),
  (32, 'Data migration strategies', '2026-01-16 11:00:00'),
  (33, 'Graph backup and recovery', '2026-01-16 12:00:00'),
  (34, 'Monitoring graph performance', '2026-01-16 13:00:00'),
  (35, 'Debugging Cypher queries', '2026-01-16 14:00:00'),
  (36, 'Advanced pattern matching', '2026-01-17 10:00:00'),
  (37, 'Aggregation in graph queries', '2026-01-17 11:00:00'),
  (38, 'WITH clause best practices', '2026-01-17 12:00:00'),
  (39, 'UNION queries in Cypher', '2026-01-17 13:00:00'),
  (40, 'Subqueries and comprehensions', '2026-01-17 14:00:00'),
  (41, 'Graph machine learning', '2026-01-18 10:00:00'),
  (42, 'Node embeddings explained', '2026-01-18 11:00:00'),
  (43, 'Link prediction models', '2026-01-18 12:00:00'),
  (44, 'Graph neural networks', '2026-01-18 13:00:00'),
  (45, 'Recommendation systems with graphs', '2026-01-18 14:00:00'),
  (46, 'Knowledge graphs fundamentals', '2026-01-19 10:00:00'),
  (47, 'Semantic web and RDF', '2026-01-19 11:00:00'),
  (48, 'Graph query languages comparison', '2026-01-19 12:00:00'),
  (49, 'Future of graph databases', '2026-01-19 13:00:00'),
  (50, 'ClickGraph roadmap 2026', '2026-01-19 14:00:00');

-- Insert AUTHORED relationships (User -> Post)
INSERT INTO social.post_authored VALUES
  (1, 1, '2026-01-10 09:00:00'),
  (1, 2, '2026-01-10 09:00:00'),
  (2, 3, '2026-01-10 09:00:00'),
  (2, 4, '2026-01-10 09:00:00'),
  (3, 5, '2026-01-10 09:00:00'),
  (3, 6, '2026-01-11 09:00:00'),
  (4, 7, '2026-01-11 09:00:00'),
  (4, 8, '2026-01-11 09:00:00'),
  (5, 9, '2026-01-11 09:00:00'),
  (5, 10, '2026-01-11 09:00:00'),
  (6, 11, '2026-01-12 09:00:00'),
  (6, 12, '2026-01-12 09:00:00'),
  (7, 13, '2026-01-12 09:00:00'),
  (7, 14, '2026-01-12 09:00:00'),
  (8, 15, '2026-01-12 09:00:00'),
  (8, 16, '2026-01-13 09:00:00'),
  (9, 17, '2026-01-13 09:00:00'),
  (9, 18, '2026-01-13 09:00:00'),
  (10, 19, '2026-01-13 09:00:00'),
  (10, 20, '2026-01-13 09:00:00'),
  (11, 21, '2026-01-14 09:00:00'),
  (11, 22, '2026-01-14 09:00:00'),
  (12, 23, '2026-01-14 09:00:00'),
  (12, 24, '2026-01-14 09:00:00'),
  (13, 25, '2026-01-14 09:00:00'),
  (13, 26, '2026-01-15 09:00:00'),
  (14, 27, '2026-01-15 09:00:00'),
  (14, 28, '2026-01-15 09:00:00'),
  (15, 29, '2026-01-15 09:00:00'),
  (15, 30, '2026-01-15 09:00:00'),
  (16, 31, '2026-01-16 09:00:00'),
  (16, 32, '2026-01-16 09:00:00'),
  (17, 33, '2026-01-16 09:00:00'),
  (17, 34, '2026-01-16 09:00:00'),
  (18, 35, '2026-01-16 09:00:00'),
  (18, 36, '2026-01-17 09:00:00'),
  (19, 37, '2026-01-17 09:00:00'),
  (19, 38, '2026-01-17 09:00:00'),
  (20, 39, '2026-01-17 09:00:00'),
  (20, 40, '2026-01-17 09:00:00'),
  (21, 41, '2026-01-18 09:00:00'),
  (22, 42, '2026-01-18 09:00:00'),
  (23, 43, '2026-01-18 09:00:00'),
  (24, 44, '2026-01-18 09:00:00'),
  (25, 45, '2026-01-18 09:00:00'),
  (26, 46, '2026-01-19 09:00:00'),
  (27, 47, '2026-01-19 09:00:00'),
  (28, 48, '2026-01-19 09:00:00'),
  (29, 49, '2026-01-19 09:00:00'),
  (30, 50, '2026-01-19 09:00:00');

-- Insert LIKED relationships (User -> Post)
INSERT INTO social.post_likes VALUES
  (1, 6, '2026-01-11 15:00:00'),
  (1, 36, '2026-01-17 16:07:00'),
  (1, 48, '2026-01-19 17:14:00'),
  (2, 8, '2026-01-11 18:21:00'),
  (2, 43, '2026-01-18 19:28:00'),
  (3, 14, '2026-01-12 20:35:00'),
  (3, 36, '2026-01-17 21:42:00'),
  (3, 38, '2026-01-17 22:49:00'),
  (3, 49, '2026-01-19 15:56:00'),
  (4, 6, '2026-01-11 16:03:00'),
  (5, 14, '2026-01-12 17:10:00'),
  (5, 41, '2026-01-18 18:17:00'),
  (6, 24, '2026-01-14 19:24:00'),
  (6, 30, '2026-01-15 20:31:00'),
  (6, 35, '2026-01-16 21:38:00'),
  (6, 44, '2026-01-18 22:45:00'),
  (7, 15, '2026-01-12 15:52:00'),
  (7, 46, '2026-01-19 16:59:00'),
  (8, 3, '2026-01-10 17:06:00'),
  (8, 9, '2026-01-11 18:13:00'),
  (8, 29, '2026-01-15 19:20:00'),
  (8, 44, '2026-01-18 20:27:00'),
  (8, 48, '2026-01-19 21:34:00'),
  (8, 50, '2026-01-19 22:41:00'),
  (9, 9, '2026-01-11 15:48:00'),
  (9, 16, '2026-01-13 16:55:00'),
  (9, 48, '2026-01-19 17:02:00'),
  (10, 6, '2026-01-11 18:09:00'),
  (10, 41, '2026-01-18 19:16:00'),
  (11, 14, '2026-01-12 20:23:00'),
  (11, 18, '2026-01-13 21:30:00'),
  (11, 50, '2026-01-19 22:37:00'),
  (12, 14, '2026-01-12 15:44:00'),
  (12, 23, '2026-01-14 16:51:00'),
  (13, 7, '2026-01-11 17:58:00'),
  (13, 18, '2026-01-13 18:05:00'),
  (13, 24, '2026-01-14 19:12:00'),
  (13, 42, '2026-01-18 20:19:00'),
  (14, 3, '2026-01-10 21:26:00'),
  (15, 10, '2026-01-11 22:33:00'),
  (15, 41, '2026-01-18 15:40:00'),
  (17, 32, '2026-01-16 16:47:00'),
  (17, 39, '2026-01-17 17:54:00'),
  (18, 8, '2026-01-11 18:01:00'),
  (18, 27, '2026-01-15 19:08:00'),
  (18, 35, '2026-01-16 20:15:00'),
  (19, 13, '2026-01-12 21:22:00'),
  (19, 18, '2026-01-13 22:29:00'),
  (19, 28, '2026-01-15 15:36:00'),
  (20, 17, '2026-01-13 16:43:00'),
  (20, 24, '2026-01-14 17:50:00'),
  (20, 41, '2026-01-18 18:57:00'),
  (21, 5, '2026-01-10 19:04:00'),
  (21, 8, '2026-01-11 20:11:00'),
  (21, 32, '2026-01-16 21:18:00'),
  (21, 45, '2026-01-18 22:25:00'),
  (22, 18, '2026-01-13 15:32:00'),
  (22, 48, '2026-01-19 16:39:00'),
  (23, 5, '2026-01-10 17:46:00'),
  (23, 28, '2026-01-15 18:53:00'),
  (23, 36, '2026-01-17 19:00:00'),
  (23, 44, '2026-01-18 20:07:00'),
  (24, 7, '2026-01-11 21:14:00'),
  (24, 16, '2026-01-13 22:21:00'),
  (24, 30, '2026-01-15 15:28:00'),
  (25, 4, '2026-01-10 16:35:00'),
  (25, 11, '2026-01-12 17:42:00'),
  (25, 22, '2026-01-14 18:49:00'),
  (26, 1, '2026-01-10 19:56:00'),
  (26, 3, '2026-01-10 20:03:00'),
  (26, 21, '2026-01-14 21:10:00'),
  (27, 24, '2026-01-14 22:17:00'),
  (28, 7, '2026-01-11 15:24:00'),
  (28, 15, '2026-01-12 16:31:00'),
  (29, 35, '2026-01-16 17:38:00'),
  (29, 38, '2026-01-17 18:45:00'),
  (29, 46, '2026-01-19 19:52:00'),
  (30, 25, '2026-01-14 20:59:00'),
  (30, 37, '2026-01-17 21:06:00'),
  (30, 41, '2026-01-18 22:13:00');

-- Insert FOLLOWS relationships (User -> User)
INSERT INTO social.user_follows VALUES
  (1, 4, '2026-01-01 10:00:00'),
  (1, 20, '2026-01-02 11:11:00'),
  (1, 24, '2026-01-03 12:22:00'),
  (3, 13, '2026-01-04 13:33:00'),
  (3, 23, '2026-01-05 14:44:00'),
  (3, 24, '2026-01-06 15:55:00'),
  (3, 25, '2026-01-07 16:06:00'),
  (4, 8, '2026-01-08 17:17:00'),
  (4, 22, '2026-01-09 18:28:00'),
  (4, 28, '2026-01-10 19:39:00'),
  (6, 15, '2026-01-11 20:50:00'),
  (6, 18, '2026-01-12 21:01:00'),
  (7, 5, '2026-01-13 10:12:00'),
  (8, 1, '2026-01-14 11:23:00'),
  (8, 2, '2026-01-15 12:34:00'),
  (8, 3, '2026-01-16 13:45:00'),
  (8, 19, '2026-01-17 14:56:00'),
  (8, 29, '2026-01-18 15:07:00'),
  (9, 17, '2026-01-19 16:18:00'),
  (9, 18, '2026-01-20 17:29:00'),
  (10, 14, '2026-01-21 18:40:00'),
  (11, 1, '2026-01-22 19:51:00'),
  (11, 4, '2026-01-23 20:02:00'),
  (11, 16, '2026-01-24 21:13:00'),
  (12, 25, '2026-01-25 10:24:00'),
  (13, 20, '2026-01-26 11:35:00'),
  (13, 22, '2026-01-27 12:46:00'),
  (14, 7, '2026-01-28 13:57:00'),
  (14, 20, '2026-01-29 14:08:00'),
  (15, 17, '2026-01-01 15:19:00'),
  (15, 29, '2026-01-02 16:30:00'),
  (16, 27, '2026-01-03 17:41:00'),
  (17, 15, '2026-01-04 18:52:00'),
  (17, 20, '2026-01-05 19:03:00'),
  (17, 30, '2026-01-06 20:14:00'),
  (18, 6, '2026-01-07 21:25:00'),
  (18, 25, '2026-01-08 10:36:00'),
  (19, 3, '2026-01-09 11:47:00'),
  (19, 18, '2026-01-10 12:58:00'),
  (21, 2, '2026-01-11 13:09:00'),
  (21, 10, '2026-01-12 14:20:00'),
  (21, 12, '2026-01-13 15:31:00'),
  (22, 16, '2026-01-14 16:42:00'),
  (22, 24, '2026-01-15 17:53:00'),
  (23, 7, '2026-01-16 18:04:00'),
  (23, 10, '2026-01-17 19:15:00'),
  (25, 6, '2026-01-18 20:26:00'),
  (25, 9, '2026-01-19 21:37:00'),
  (25, 21, '2026-01-20 10:48:00'),
  (25, 24, '2026-01-21 11:59:00'),
  (25, 30, '2026-01-22 12:10:00'),
  (26, 10, '2026-01-23 13:21:00'),
  (27, 21, '2026-01-24 14:32:00'),
  (28, 1, '2026-01-25 15:43:00'),
  (28, 20, '2026-01-26 16:54:00'),
  (29, 18, '2026-01-27 17:05:00'),
  (29, 24, '2026-01-28 18:16:00'),
  (29, 27, '2026-01-29 19:27:00'),
  (30, 12, '2026-01-01 20:38:00'),
  (30, 18, '2026-01-02 21:49:00');
